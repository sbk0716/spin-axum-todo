// =============================================================================
// infrastructure/src/persistence/mod.rs: 永続化モジュール
// =============================================================================
// PostgreSQL と Redis への永続化処理を管理する。
//
// 構成:
// ┌─────────────────────────────────────────────────────────────┐
// │ db_pools                                                    │
// │ - DbPools: Reader/Writer 分離対応の PostgreSQL 接続プール   │
// │ - Aurora などでのスケールアウト対応                         │
// ├─────────────────────────────────────────────────────────────┤
// │ postgres/                                                   │
// │ - PostgresTodoReader / Writer: TODO の CQRS 実装            │
// │ - PostgresUserReader / Writer: ユーザーの CQRS 実装         │
// │ - PostgresFileReader / Writer: ファイルの CQRS 実装         │
// ├─────────────────────────────────────────────────────────────┤
// │ redis/                                                      │
// │ - TodoCache: Redis を使用したキャッシュ実装                 │
// │ - Cache-Aside パターン + Write-Through/無効化               │
// └─────────────────────────────────────────────────────────────┘
//
// CQRS パターン（Command Query Responsibility Segregation）:
// - Reader: 読み取り専用操作（Reader Pool を使用）
// - Writer: 書き込み操作（Writer Pool を使用）
// =============================================================================

// -----------------------------------------------------------------------------
// サブモジュール宣言
// -----------------------------------------------------------------------------

/// DB 接続プール（Reader/Writer 分離対応）
pub mod db_pools;

/// PostgreSQL リポジトリ実装
pub mod postgres;

/// Redis キャッシュ実装
pub mod redis;

// -----------------------------------------------------------------------------
// 再エクスポート（Re-export）
// -----------------------------------------------------------------------------

/// DbPools を直接アクセス可能にする
pub use db_pools::DbPools;
