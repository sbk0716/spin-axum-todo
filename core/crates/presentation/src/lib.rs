// =============================================================================
// presentation/src/lib.rs: プレゼンテーション層のルートモジュール
// =============================================================================
// クリーンアーキテクチャの最外層（UI/インターフェース層）。
// HTTP リクエスト/レスポンスの処理を担当する。
//
// 責務:
// - HTTP リクエストの受信とパース
// - ユースケース（Application 層）の呼び出し
// - HTTP レスポンスの生成
// - エラーの HTTP ステータスコードへの変換
//
// 公開する主な要素:
// - AppState: アプリケーション状態（ユースケースを保持）
// - create_router: ルーター構築関数
// - ApiError: HTTP エラーレスポンス
// - UserContext: 認証済みユーザー情報
//
// 使用フレームワーク:
// - axum 0.8: Web フレームワーク
// - Tower: ミドルウェアスタック
// =============================================================================

// -----------------------------------------------------------------------------
// サブモジュール宣言
// -----------------------------------------------------------------------------

// error: API エラー型（DomainError → HTTP レスポンス変換）
pub mod error;

// handlers: HTTP ハンドラ（エンドポイント実装）
pub mod handlers;

// middleware: カスタムミドルウェア（Edge 検証、ユーザーコンテキスト）
pub mod middleware;

// routes: ルーティング設定
pub mod routes;

// state: アプリケーション状態（DI コンテナ）
pub mod state;

// -----------------------------------------------------------------------------
// 主要な型の再エクスポート
// -----------------------------------------------------------------------------

// ApiError: API エラー型（IntoResponse を実装）
pub use error::ApiError;

// UserContext: 認証済みユーザー情報（ミドルウェアで設定）
pub use middleware::UserContext;

// create_router: ルーター構築関数
pub use routes::create_router;

// AppState: アプリケーション状態（ユースケースを保持）
pub use state::AppState;
