// =============================================================================
// application/src/dto/create_todo_dto.rs: TODO 作成リクエスト DTO
// =============================================================================
// HTTP POST リクエストボディからデシリアライズされる構造体。
// ドメインエンティティ（Todo）とは別に定義することで、
// API の契約とドメインモデルを分離する。
//
// バリデーションについて:
// - DTO 自体はバリデーションを行わない
// - CreateTodoCommand で Todo::validate_title() を呼び出す
// - これにより、バリデーションロジックをドメイン層に集約
// =============================================================================

// -----------------------------------------------------------------------------
// 外部クレートのインポート
// -----------------------------------------------------------------------------

// serde: シリアライズ/デシリアライズのためのフレームワーク
// Deserialize: JSON などからの変換を可能にする
use serde::Deserialize;

// =============================================================================
// TODO 作成リクエスト DTO
// =============================================================================

/// TODO 作成リクエスト用 DTO（Data Transfer Object）
///
/// HTTP リクエストボディからデシリアライズされる。
///
/// # derive マクロの説明
///
/// - `Debug`: `{:?}` フォーマットでデバッグ出力可能に
/// - `Clone`: `.clone()` でコピー可能に
/// - `Deserialize`: JSON からのデシリアライズを可能に
///
/// # Serialize がない理由
///
/// この DTO はリクエスト専用。レスポンスには Todo エンティティを直接使用。
/// リクエストとレスポンスで別の型を使うことで、責務を明確に分離。
///
/// # 例: HTTP リクエスト
///
/// ```json
/// {
///   "title": "Buy groceries",
///   "description": "Milk, eggs, bread"
/// }
/// ```
#[derive(Debug, Clone, Deserialize)]
pub struct CreateTodoDto {
    /// タイトル（必須）
    ///
    /// バリデーション（CreateTodoCommand で実行）:
    /// - 空文字列は不可
    /// - 100 文字以内
    pub title: String,

    /// 詳細説明（任意）
    ///
    /// Option<String> なので、JSON で省略可能:
    /// - `"description": "some text"` → Some("some text")
    /// - `"description": null` → None
    /// - フィールド省略 → None
    pub description: Option<String>,
}
