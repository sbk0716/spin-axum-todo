// =============================================================================
// application/src/dto/update_todo_dto.rs: TODO 更新リクエスト DTO
// =============================================================================
// HTTP PATCH リクエストボディからデシリアライズされる構造体。
// 部分更新（Partial Update）をサポートするため、全フィールドが Option。
//
// PATCH と PUT の違い:
// - PUT: リソース全体を置換（全フィールド必須）
// - PATCH: リソースの一部を更新（指定フィールドのみ更新）
//
// このプロジェクトでは PATCH セマンティクスを採用:
// - 指定されたフィールドのみ更新
// - 未指定（None）のフィールドは既存値を維持
// =============================================================================

// -----------------------------------------------------------------------------
// 外部クレートのインポート
// -----------------------------------------------------------------------------

// serde: シリアライズ/デシリアライズのためのフレームワーク
use serde::Deserialize;

// =============================================================================
// TODO 更新リクエスト DTO
// =============================================================================

/// TODO 更新リクエスト用 DTO
///
/// PATCH リクエストに対応するため、すべてのフィールドが Option。
/// 指定されたフィールドのみ更新し、None のフィールドは既存の値を維持。
///
/// # 例: 部分更新
///
/// タイトルのみ更新:
/// ```json
/// { "title": "New Title" }
/// ```
///
/// 完了状態のみ更新:
/// ```json
/// { "completed": true }
/// ```
///
/// 複数フィールド更新:
/// ```json
/// {
///   "title": "Updated",
///   "completed": true
/// }
/// ```
#[derive(Debug, Deserialize)]
pub struct UpdateTodoDto {
    /// 新しいタイトル（指定時のみ更新）
    ///
    /// Some("value"): 指定された値に更新
    /// None: 既存値を維持（フィールド未指定）
    pub title: Option<String>,

    /// 新しい説明（指定時のみ更新）
    ///
    /// Some("value"): 指定された値に更新
    /// None: 既存値を維持（フィールド未指定）
    ///
    /// 注意: 現在の実装では description を null にクリアできない。
    /// null と未指定を区別するには Option<Option<String>> が必要。
    pub description: Option<String>,

    /// 新しい完了状態（指定時のみ更新）
    ///
    /// Some(true): 完了にマーク
    /// Some(false): 未完了にマーク
    /// None: 既存値を維持（フィールド未指定）
    pub completed: Option<bool>,
}
